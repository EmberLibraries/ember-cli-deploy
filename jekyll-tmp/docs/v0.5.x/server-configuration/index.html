<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Server configuration &middot; Ember CLI Deploy
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/style.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    
  
    
  


<header class="Header">
  <nav class='Header__nav'>
    <ul class='Header__nav-list'>
      <li class='Header__nav-item'>
        <a href='/' class="Header__nav-item-link ">Home</a>
      </li>
      <li class='Header__nav-item'>
        <a href='/docs/v0.5.x' class="Header__nav-item-link active">Docs</a>
      </li>
      <li class='Header__nav-item'>
        <a href='/plugins' class="Header__nav-item-link">Plugins</a>
      </li>
      <li class='Header__nav-item'>
        <a href="https://github.com/ember-cli/ember-cli-deploy" class='Header__nav-item-link' target="_blank">GitHub</a>
      </li>
    </ul>
  </nav>
  <a class="Header__logo" href="/">
    <span class='Header__logo-minor'>Ember CLI</span><br>
    <span class='Header__logo-major'>Deploy</span>
  </a>
</header>
 

    <div class="Wrapper">
      <div class="Content">
        

<div class="Side-panel">

  <select class="Mobile-nav" onchange="if (this.value) window.location.href=this.value">
    <option value="">Navigate the docs...</option>
    
      


  
  <optgroup label='Getting started'>

<option value="/docs/v0.5.x/">Overview</option>


    
      


<option value="/docs/v0.5.x/installation/">Installation</option>


    
      


<option value="/docs/v0.5.x/quickstart/">Quickstart</option>


    
      


  
    </optgroup>
  
  <optgroup label='Writing your server'>

<option value="/docs/v0.5.x/defining-routes/">Defining routes</option>


    
      


<option value="/docs/v0.5.x/seeding-your-database/">Seeding your database</option>


    
      


<option value="/docs/v0.5.x/acceptance-testing/">Acceptance testing</option>


    
      


  
    </optgroup>
  
  <optgroup label='API reference'>

<option value="/docs/v0.5.x/server-configuration/">Server configuration</option>


    
      


<option value="/docs/v0.5.x/routes/">Routes</option>


    
      


<option value="/docs/v0.5.x/shorthands/">Shorthands</option>


    
      


<option value="/docs/v0.5.x/database/">Database</option>


    
      


<option value="/docs/v0.5.x/factories/">Factories</option>

  </optgroup>


    
  </select>

  <ul class="Desktop-nav">
    
      
        <li class='Desktop-nav__section'>Getting started</li>
      
      
        

<li>
  <a class="Desktop-nav__item " href="/docs/v0.5.x/">
    Overview
  </a>
</li>

      
    
      
      
        

<li>
  <a class="Desktop-nav__item " href="/docs/v0.5.x/installation/">
    Installation
  </a>
</li>

      
    
      
      
        

<li>
  <a class="Desktop-nav__item " href="/docs/v0.5.x/quickstart/">
    Quickstart
  </a>
</li>

      
    
      
        <li class='Desktop-nav__section'>Writing your server</li>
      
      
        

<li>
  <a class="Desktop-nav__item " href="/docs/v0.5.x/defining-routes/">
    Defining routes
  </a>
</li>

      
    
      
      
        

<li>
  <a class="Desktop-nav__item " href="/docs/v0.5.x/seeding-your-database/">
    Seeding your database
  </a>
</li>

      
    
      
      
        

<li>
  <a class="Desktop-nav__item " href="/docs/v0.5.x/acceptance-testing/">
    Acceptance testing
  </a>
</li>

      
    
      
        <li class='Desktop-nav__section'>API reference</li>
      
      
        

<li>
  <a class="Desktop-nav__item active" href="/docs/v0.5.x/server-configuration/">
    Server configuration
  </a>
</li>

      
    
      
      
        

<li>
  <a class="Desktop-nav__item " href="/docs/v0.5.x/routes/">
    Routes
  </a>
</li>

      
    
      
      
        

<li>
  <a class="Desktop-nav__item " href="/docs/v0.5.x/shorthands/">
    Shorthands
  </a>
</li>

      
    
      
      
        

<li>
  <a class="Desktop-nav__item " href="/docs/v0.5.x/database/">
    Database
  </a>
</li>

      
    
      
      
        

<li>
  <a class="Desktop-nav__item " href="/docs/v0.5.x/factories/">
    Factories
  </a>
</li>

      
    
  </ul>
</div>


<div class="Center-panel">
  <div class="Docs-page">
    <div class='Docs-page__header'>
      <div class="Docs-page__version">
        <select onchange="if (this.value) window.location.href=this.value">
          
            <option value="/docs/v0.5.x" selected >v0.5.x</option>
          
        </select>
      </div>
      <h1 class='Docs-page__title'>Server configuration</h1>
    </div>

    <div class='Docs-page__content'>
      <p>Besides defining your routes, there&#39;s some config options for your server available in <code>/app/mirage/config.js</code>. There&#39;s also some environment options, which you define in <code>/config/environment.js</code>.</p>

<h2>Server config</h2>

<p><a name="namespace" href="#namespace">#</a> this.<b>namespace</b></p>

<p>Set the base namespace used for all routes defined with <code>get</code>, <code>post</code>, <code>put</code> or <code>del</code>.</p>

<p>For example,</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// app/mirage/config.js</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">namespace</span> <span class="o">=</span> <span class="s1">&#39;/api&#39;</span><span class="p">;</span>

  <span class="c1">// this route will handle the URL &#39;/api/contacts&#39;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/contacts&#39;</span><span class="p">,</span> <span class="s1">&#39;contacts&#39;</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div>
<p>Note that only routes defined after <code>this.namespace</code> are affected. This is useful if you have a few one-off routes that you don&#39;t want under your namespace:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// app/mirage/config.js</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="c1">// this route handles /auth</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/auth&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span><span class="p">});</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">namespace</span> <span class="o">=</span> <span class="s1">&#39;/api&#39;</span><span class="p">;</span>
  <span class="c1">// this route will handle the URL &#39;/api/contacts&#39;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/contacts&#39;</span><span class="p">,</span> <span class="s1">&#39;contacts&#39;</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div>
<p><a name="timing" href="#timing">#</a> this.<b>timing</b></p>

<p>Set the timing parameter of the response. Default is a 400ms delay during development and 0 delay in testing (so your tests run fast).</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// app/mirage/config.js</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">timing</span> <span class="o">=</span> <span class="mi">400</span><span class="p">;</span> <span class="c1">// default</span>

<span class="p">};</span>
</code></pre></div>
<p><a name="pretender" href="#pretender">#</a> this.<strong>pretender</strong></p>

<p>Mirage uses <a href="https://github.com/trek/pretender">pretender.js</a> as its xhttp interceptor. in your mirage config, <code>this.pretender</code> refers to the actual pretender instance, so any config options that work there will work here as well. by default, content returned is json stringified, so you can just return js objects. </p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// app/mirage/config.js</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/api/v1&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">pretender</span><span class="p">.</span><span class="nx">passthrough</span><span class="p">);</span>

<span class="p">};</span>
</code></pre></div>
<p>Refer to <a href="https://github.com/trek/pretender#mutating-the-body">pretender&#39;s docs</a> if you want to change this or any other options on your pretender instance.</p>

<p><a name="testConfig" href="#testConfig">#</a> <strong>testConfig</strong></p>

<p>Export a named <code>testConfig</code> function to define routes that only apply in your test environment:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// mirage/config.js</span>

<span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// normal config, shared across development + testing</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="kd">function</span> <span class="nx">testConfig</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// test-only config, does not apply to development</span>
<span class="p">}</span>
</code></pre></div>
<p>This could be useful if you&#39;d like use Mirage in testing, but generally proxy to an actual API during development. As you develop, your frontend may be ahead of your API, in which case you&#39;d work with the routes in the default config, and write your tests. Then, once your API implements the new endpoints, you can move the routes to your testConfig, so your tests still run, but Mirage doesn&#39;t interfere during development.</p>

<h2>Environment options</h2>

<p><a name="enabled" href="#enabled">#</a> ENV[&#39;ember-cli-mirage&#39;].<b>enabled</b></p>

<p>By default, your Mirage server will run in test mode, and in development mode as long as the <code>--proxy</code> option isn&#39;t passed. To change this default behavior, set <code>enabled</code> to either true or false in your ENV config.</p>

<p>For example, to enable in production (e.g. to share a working prototype before your server is ready):</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// config/environment.js</span>
<span class="p">...</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">environment</span> <span class="o">===</span> <span class="s1">&#39;production&#39;</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">ENV</span><span class="p">[</span><span class="s1">&#39;ember-cli-mirage&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">enabled</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>To disable in development,</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// config/environment.js</span>
<span class="p">...</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">environment</span> <span class="o">===</span> <span class="s1">&#39;development&#39;</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">ENV</span><span class="p">[</span><span class="s1">&#39;ember-cli-mirage&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">enabled</span><span class="o">:</span> <span class="kc">false</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
    </div>

    

<div class='Docs-page-nav'>
  
    
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
      
      
      
        
  
         <a class="Docs-page-nav__link u-first" href="/docs/v0.5.x/acceptance-testing/">< Acceptance testing</a>
      
  
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
      
      
      
        
  
         <a class="Docs-page-nav__link u-last" href="/docs/v0.5.x/routes/">Routes ></a>
      
  
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
</div>

  </div>
</div>

      </div>
    </div>
    
    <footer class="Footer">
  <div class="Container Grid Grid--gutters Grid--full med-Grid--fit">
    <div class="Grid-cell">
      <p>We <3 our <a href="https://github.com/ember-cli/ember-cli-deploy/graphs/contributors">contributors</a>.</p>
    </div>
    <div class="Grid-cell">
      <div class="Github-stars">
        <iframe src="https://ghbtns.com/github-btn.html?user=ember-cli&repo=ember-cli-deploy&type=star&count=true" frameborder="0" scrolling="0" width="170px" height="20px"></iframe>
      </div>
    </div>
  </div> 
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/1.1.1/anchor.min.js"></script>
<script>
  /* global anchors */
  // anchors.options = {
  //   placement: 'left',
  //   visible: 'always'
  // };
  anchors.add('h2:not(.Home-page__feature-heading)');
</script>
 

  </body>
</html>
